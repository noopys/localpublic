# Wiki
https://github.com/Dari9590/Local/wiki

# Setup
- This is assuming usage of Ubuntu `22.04.02`
    - get that version of ubuntu setup in wsl and use the linux enviroment for this if you are in windows
    - someone on mac should update this, it's unix so it should be basically the same
- Install docker and docker compose plugin using the apt repo like these instructions [https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository](https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository)
    - Do not install latest version, install specific version `5:24.0.0-1`
    - On Ubuntu, use version string: `VERSION_STRING=5:24.0.0-1~ubuntu.22 04~jammy`
    - Follow [https://www.baeldung.com/linux/docker-run-without-sudo](https://www.baeldung.com/linux/docker-run-without-sudo) to use docker without sudo if you want (potential security risk)
- If everything is working, you should be able to run in this directory
    ```
    sudo docker compose up --build
    ```
    and see terminal outputs
- run any django migrations to fix the database using
    ```
    sudo docker compose run backend python3.11 manage.py migrate
    ```

# How things Work
To start everything up, run
```
sudo docker compose up --build
```
This should start each service up in a different container which can be accessed on its own.

### Database
The database file is located at `./backend/db.sqlite3`. You can access the database explorer (online web tool to explore the database) at [http://0.0.0.0:8080/](http://0.0.0.0:8080/). Try not to actively mess with it in the explorer, instead use django and the migrations tool. More content on that TODO.
- password: local

### Backend
Everthing for Django is located in `./backend`. The main project is `./backend/src/` and there is an example app in `./backend/helloWorld/` with a few reference views, models, and urls. You can generally access all the django stuff at [http://0.0.0.0:5000/](http://0.0.0.0:5000/). The views can be seen by following down [http://0.0.0.0:5000/helloWorld](http://0.0.0.0:5000/helloWorld).

We will be using `django-ninja` to create the api which will feed the React frontend. I have created a few example endpoints in `./backend/helloWorld/api`. The reference api stuff can be seen by following [http://0.0.0.0:5000/api/docs](http://0.0.0.0:5000/api/docs) which will bring up the autogenerated docs using swagger.

To view the admin page, go to [http://0.0.0.0:5000/admin/](http://0.0.0.0:5000/admin/)
- username: root
- password: local

### Frontend
Everything for the frontend is in `./frontend`. It is setup like a normal react project, so `./frontend/src/App.tsx` is the main file. `./frontend/src/pages` is where you place page views, and `./frontend/src/components` is where you place components (in their own folders please). Use typescript (tsx not js) files now so that things scale better.

The frontend is exposed on port 2999. To view it go to [http://0.0.0.0:2999/](http://0.0.0.0:2999/).

If you need to install node modules or something, please let me know. Node is trash so it's really easy to break configs.

# Components Used for Easy Googling
- Database: Sqlite
- Backend: Django
    - Rest-Api Plugin for Django: django-ninja (no example between frontend and backend up yet)
- Frontend: React using vite and node
    - Component Library: Mantine
    - Routing: React Router
    - Datetime: DayJS

